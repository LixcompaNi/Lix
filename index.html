<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>FPI SYSTEM v.9.0</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style id="custom-styles">
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&display=swap');
        body { background: #f8f9fa; color: #1a1a1a; font-family: 'Plus Jakarta Sans', sans-serif; margin: 0; transition: 0.3s; }
        .fpi-card { background: #ffffff; border-radius: 32px; border: 1px solid #edf0f3; }
        .fpi-btn { background: #1a1a1a; color: #ffffff; border-radius: 20px; transition: 0.3s; }
        .fpi-btn:active { transform: scale(0.96); }
        .admin-panel { display: none; position: fixed; inset: 0; background: #ffffff; z-index: 1000; overflow-y: auto; }
        @media (prefers-color-scheme: dark) {
            body { background: #000000; color: #fff; }
            .fpi-card { background: #111; border-color: #222; }
            .fpi-btn { background: #fff; color: #000; }
            .admin-panel { background: #000; }
        }
    </style>
</head>
<body class="p-5">

    <div class="flex justify-between items-center mb-8 px-2 pt-4">
        <div class="flex items-center gap-3">
            <div id="user-photo" class="w-10 h-10 bg-zinc-200 rounded-full flex items-center justify-center font-bold overflow-hidden border-2 border-white shadow-sm">
                üë§
            </div>
            <div>
                <p class="text-[10px] text-gray-400 font-bold uppercase tracking-widest">Client</p>
                <h2 id="user-name" class="text-sm font-800 tracking-tight">Guest User</h2>
            </div>
        </div>
        <div class="bg-zinc-100 dark:bg-zinc-800 p-2 rounded-full px-4 text-[10px] font-bold uppercase tracking-widest">FPI VIP</div>
    </div>

    <div class="fpi-card p-8 mb-6 shadow-sm">
        <p class="text-[11px] font-bold text-gray-400 uppercase tracking-widest mb-2">Total Balance</p>
        <h2 id="display-balance" class="text-4xl font-extrabold tracking-tighter mb-8">$542.00</h2>
        <div class="flex gap-3">
            <button onclick="copyAddress()" class="flex-1 fpi-btn py-4 text-xs font-bold uppercase tracking-widest shadow-lg shadow-black/5">Receive</button>
            <button onclick="userPay()" class="bg-yellow-400 text-black px-6 rounded-2xl font-bold">‚≠ê</button>
        </div>
    </div>

    <div id="dynamic-assets" class="space-y-4 mb-8">
        <div class="fpi-card p-4 flex justify-between items-center">
            <div class="flex items-center gap-4">
                <div class="w-12 h-12 bg-blue-500 rounded-2xl flex items-center justify-center font-black text-white text-xs">TON</div>
                <div><p class="font-800 text-sm">Toncoin</p><p class="text-[10px] text-gray-400 font-bold">Official</p></div>
            </div>
            <p class="font-800 text-sm">100.00</p>
        </div>
    </div>

    <div class="fpi-card p-6 border-dashed border-2 bg-transparent">
        <input type="text" id="user-coin-name" placeholder="Token Name" class="w-full bg-white dark:bg-zinc-900 p-4 rounded-2xl mb-4 border border-zinc-200 dark:border-zinc-800 outline-none font-bold">
        <button onclick="userPay()" class="w-full fpi-btn py-4 text-[10px] font-black uppercase tracking-widest">Confirm (100 Stars)</button>
    </div>

    <div id="admin-screen" class="admin-panel p-6">
        <div class="flex justify-between items-center mb-8">
            <h2 class="text-2xl font-black">SYSTEM CONFIG</h2>
            <button onclick="closeAdmin()" class="text-xl">‚úï</button>
        </div>
        
        <div class="space-y-6">
            <div class="bg-zinc-50 dark:bg-zinc-900 p-5 rounded-3xl border border-zinc-100 dark:border-zinc-800">
                <p class="text-xs font-bold text-gray-400 mb-3 uppercase">Site Code Editor (CSS)</p>
                <textarea id="css-editor" class="w-full h-32 bg-black text-green-500 font-mono text-xs p-4 rounded-xl mb-4" placeholder="body { background: red; }"></textarea>
                <button onclick="applyCode()" class="w-full bg-blue-600 text-white py-3 rounded-xl font-bold text-xs">APPLY CHANGES</button>
            </div>

            <div class="bg-zinc-50 dark:bg-zinc-900 p-5 rounded-3xl border border-zinc-100 dark:border-zinc-800">
                <p class="text-xs font-bold text-gray-400 mb-3 uppercase">Balance Control</p>
                <input type="text" id="new-balance" class="w-full bg-white dark:bg-black p-4 rounded-xl mb-3 border border-zinc-200 dark:border-zinc-800 font-bold" placeholder="Example: $1,000,000">
                <button onclick="updateBalance()" class="w-full bg-indigo-600 text-white py-3 rounded-xl font-bold text-xs uppercase">Update Display</button>
            </div>
        </div>
    </div>

    <div class="mt-10 text-center opacity-5 text-[8px]" onclick="openAdmin()">DEVELOPER MODE</div>

    <script>
        const webApp = window.Telegram.WebApp;
        webApp.ready();

        // –ê–í–¢–û–†–ò–ó–ê–¶–ò–Ø
        if (webApp.initDataUnsafe && webApp.initDataUnsafe.user) {
            const user = webApp.initDataUnsafe.user;
            document.getElementById('user-name').innerText = user.first_name + (user.last_name ? ' ' + user.last_name : '');
            if (user.photo_url) {
                document.getElementById('user-photo').innerHTML = `<img src="${user.photo_url}" class="w-full h-full object-cover">`;
            }
        }

        const ADMIN_KEY = "LIX-ADMIN-2026-X";
        
        function openAdmin() {
            if (prompt("ADMIN KEY:") === ADMIN_KEY) {
                document.getElementById('admin-screen').style.display = 'block';
            }
        }
        function closeAdmin() { document.getElementById('admin-screen').style.display = 'none'; }

        // –§–£–ù–ö–¶–ò–Ø –ò–ó–ú–ï–ù–ï–ù–ò–Ø –ö–û–î–ê
        function applyCode() {
            const newCss = document.getElementById('css-editor').value;
            document.getElementById('custom-styles').innerHTML += newCss;
            localStorage.setItem('custom_code', newCss); // –°–æ—Ö—Ä–∞–Ω—è–µ–º "–∫–æ–¥" –≤ –ø–∞–º—è—Ç–∏ —Ç–µ–ª–µ—Ñ–æ–Ω–∞
            webApp.showAlert("Style applied!");
        }

        function updateBalance() {
            const val = document.getElementById('new-balance').value;
            if(val) {
                document.getElementById('display-balance').innerText = val;
                localStorage.setItem('my_balance', val);
            }
        }

        function copyAddress() {
            navigator.clipboard.writeText("UQB4nPZHmv-krk6ayZ4Iy4BstgnSEpYOQHwYIXRsBBbTxF1V");
            webApp.showAlert("FPI Wallet: Copied");
        }

        async function userPay() {
            const name = document.getElementById('user-coin-name').value;
            if(!name) return webApp.showAlert("Name asset!");
            webApp.showConfirm(`Mint ${name}?`, (c) => {
                if(c) webApp.showAlert("Bridge connected.");
            });
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
        if(localStorage.getItem('custom_code')) {
            document.getElementById('custom-styles').innerHTML += localStorage.getItem('custom_code');
        }
        if(localStorage.getItem('my_balance')) {
            document.getElementById('display-balance').innerText = localStorage.getItem('my_balance');
        }
    </script>
</body>
</html>
